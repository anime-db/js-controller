/* js-controller 2016-04-20 */
function extend(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.superclass=b.prototype}var Controller=function(){this._controls=[]};Controller.prototype.addControl=function(a,b){b instanceof ControllerControl&&(b.setController(this),this._controls[a]=b)},Controller.prototype.bindControl=function(a){var b=a.data("control");this._controls[b]instanceof ControllerControl&&this._controls[b].bind(a)},Controller.prototype.bind=function(a){if(a=$(a||"body"),a.data("control"))this.bindControl(a);else{var b=this;a.find("[data-control]").each(function(){b.bindControl($(this))})}};var ControllerControl=function(){};ControllerControl.prototype.setController=function(a){},ControllerControl.prototype.bind=function(a){throw new Error("Must be implemented")};var FormToken=function(){this._token="",this._url="",this._wait=!1};FormToken.prototype.getToken=function(){return this._token},FormToken.prototype.setUrl=function(a){this._url=a,a&&!this._token&&this.refreshToken()},FormToken.prototype.refreshToken=function(a){if(!this._wait&&this._url){this._wait=!0;var b=this;$.ajax({url:this._url,type:"POST",dataType:"text",processData:!1,contentType:!1,success:function(c){b._token=c,b._wait=!1,(a||function(){})()},complete:function(){b._wait=!1}})}};var Locker=function(){this._is_lock=!1,this._body=$("body")};Locker.prototype.lock=function(a){this._is_lock=!0,this._body.addClass("locker_wait"),a&&a.addClass("locker_lock")},Locker.prototype.unlock=function(a){this._is_lock=!1,this._body.removeClass("locker_wait"),a&&a.removeClass("locker_lock")},Locker.prototype.isLock=function(){return this._is_lock};